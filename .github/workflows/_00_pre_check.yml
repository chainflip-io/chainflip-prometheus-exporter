on: workflow_call
jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ
        uses: actions/checkout@v3

      - name: Get Node.JS version from package.json ğŸ‘€
        id: get-versions
        run: echo "nodeVersion=$(jq -r .engines.node ./package.json)" >> $GITHUB_OUTPUT

      - name: Install pnpm ğŸ’¿
        run: npm install -g pnpm@8

      - name: Setup Node ğŸ®
        uses: actions/setup-node@v3
        with:
          node-version: ${{ steps.get-versions.outputs.nodeVersion }}
          cache: "pnpm"

      - name: Install dependencies ğŸ“
        run: pnpm install --no-frozen-lockfile

      - name: Lint ğŸ“
        run: pnpm lint
  schemaValidation:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ
        uses: actions/checkout@v3

      - name: Get Node.JS version from package.json ğŸ‘€
        id: get-versions
        run: echo "nodeVersion=$(jq -r .engines.node ./package.json)" >> $GITHUB_OUTPUT

      - name: Install pnpm ğŸ’¿
        run: npm install -g pnpm@8

      - name: Setup Node ğŸ®
        uses: actions/setup-node@v3
        with:
          node-version: ${{ steps.get-versions.outputs.nodeVersion }}
          cache: "pnpm"

      - name: Install dependencies ğŸ“
        run: pnpm install --no-frozen-lockfile

      - name: Create schema ğŸ“
        run: pnpm schema

      - name: Validate schema ğŸ“
        run: pnpm validate
#
#  prettier:
#    runs-on: ubuntu-latest
#    steps:
#      - name: Checkout ğŸ
#        uses: actions/checkout@v3
#
#      - name: Prettify code
#        uses: creyD/prettier_action@v4.3
#        with:
#          # This part is also where you can pass other options, for example:
#          file_pattern: "{**/*,*}.{ts}"
#          dry: true